<template>
  <div class="floating-menu-demo">
    <h1>ğŸ¯ æ‚¬æµ®èœå•æ¼”ç¤º</h1>
    
    <div class="demo-section">
      <h2>åŸºç¡€æ‚¬æµ®èœå•</h2>
      <div class="demo-row">
        <FloatingMenu 
          button-text="åŸºç¡€èœå•"
          icon="ğŸ“‹"
          :menu-items="basicMenuItems"
          @item-click="handleBasicMenuClick"
        />
        
        <FloatingMenu 
          button-text="ç”¨æˆ·èœå•"
          icon="ğŸ‘¤"
          :menu-items="userMenuItems"
          @item-click="handleUserMenuClick"
        />
        
        <FloatingMenu 
          button-text="è®¾ç½®èœå•"
          icon="âš™ï¸"
          :menu-items="settingsMenuItems"
          @item-click="handleSettingsMenuClick"
        />
      </div>
    </div>
    
    <div class="demo-section">
      <h2>é«˜çº§æ‚¬æµ®èœå•</h2>
      <div class="demo-row">
        <FloatingMenu 
          button-text="é«˜çº§èœå•"
          icon="ğŸš€"
          menu-title="åŠŸèƒ½ä¸­å¿ƒ"
          :show-close-button="true"
          :hide-delay="300"
          @item-click="handleAdvancedMenuClick"
        >
          <template #menu-items>
            <div class="custom-menu-item" @click="handleCustomAction('theme')">
              <span class="custom-icon">ğŸ¨</span>
              <div class="custom-content">
                <span class="custom-title">ä¸»é¢˜åˆ‡æ¢</span>
                <span class="custom-desc">åˆ‡æ¢æ˜æš—ä¸»é¢˜</span>
              </div>
            </div>
            
            <div class="custom-menu-item" @click="handleCustomAction('notification')">
              <span class="custom-icon">ğŸ””</span>
              <div class="custom-content">
                <span class="custom-title">é€šçŸ¥è®¾ç½®</span>
                <span class="custom-desc">ç®¡ç†é€šçŸ¥åå¥½</span>
              </div>
            </div>
            
            <div class="custom-menu-item" @click="handleCustomAction('language')">
              <span class="custom-icon">ğŸŒ</span>
              <div class="custom-content">
                <span class="custom-title">è¯­è¨€è®¾ç½®</span>
                <span class="custom-desc">é€‰æ‹©ç•Œé¢è¯­è¨€</span>
              </div>
            </div>
          </template>
          
          <template #menu-footer>
            <div class="menu-footer-actions">
              <button class="footer-btn primary" @click="handleCustomAction('help')">
                ğŸ’¡ å¸®åŠ©ä¸­å¿ƒ
              </button>
              <button class="footer-btn secondary" @click="handleCustomAction('feedback')">
                ğŸ“ æ„è§åé¦ˆ
              </button>
            </div>
          </template>
        </FloatingMenu>
        
        <FloatingMenu 
          button-text="æ–‡ä»¶èœå•"
          icon="ğŸ“"
          menu-title="æ–‡ä»¶æ“ä½œ"
          :hide-delay="250"
          @item-click="handleFileMenuClick"
        >
          <template #menu-items>
            <div class="file-menu-item" @click="handleFileAction('new')">
              <span class="file-icon">ğŸ“„</span>
              <span class="file-text">æ–°å»ºæ–‡ä»¶</span>
            </div>
            
            <div class="file-menu-item" @click="handleFileAction('open')">
              <span class="file-icon">ğŸ“‚</span>
              <span class="file-text">æ‰“å¼€æ–‡ä»¶</span>
            </div>
            
            <div class="file-menu-item" @click="handleFileAction('save')">
              <span class="file-icon">ğŸ’¾</span>
              <span class="file-text">ä¿å­˜æ–‡ä»¶</span>
            </div>
            
            <div class="file-menu-item" @click="handleFileAction('export')">
              <span class="file-icon">ğŸ“¤</span>
              <span class="file-text">å¯¼å‡ºæ–‡ä»¶</span>
            </div>
          </template>
        </FloatingMenu>
      </div>
    </div>
    
    <div class="demo-section">
      <h2>å¯¼èˆªæ é›†æˆç¤ºä¾‹</h2>
      <div class="demo-navbar">
        <div class="nav-brand">Demo App</div>
        
        <div class="nav-menu">
          <a href="#" class="nav-link">é¦–é¡µ</a>
          <a href="#" class="nav-link">äº§å“</a>
          <a href="#" class="nav-link">æœåŠ¡</a>
          
          <FloatingMenu 
            button-text="æ›´å¤š"
            icon="â‹¯"
            :menu-items="moreMenuItems"
            :hide-delay="200"
            class="nav-dropdown"
            @item-click="handleMoreMenuClick"
          />
        </div>
        
        <div class="nav-actions">
          <FloatingMenu 
            button-text="ç”¨æˆ·"
            icon="ğŸ‘¤"
            :menu-items="profileMenuItems"
            :hide-delay="250"
            class="profile-dropdown"
            @item-click="handleProfileMenuClick"
          />
        </div>
      </div>
    </div>
    
    <div class="demo-section">
      <h2>äº¤äº’è¯´æ˜</h2>
      <div class="interaction-info">
        <div class="info-item">
          <span class="info-icon">ğŸ–±ï¸</span>
          <span class="info-text">æ¡Œé¢ç«¯ï¼šé¼ æ ‡æ‚¬åœæ˜¾ç¤ºèœå•</span>
        </div>
        <div class="info-item">
          <span class="info-icon">ğŸ‘†</span>
          <span class="info-text">ç§»åŠ¨ç«¯ï¼šç‚¹å‡»æŒ‰é’®æ˜¾ç¤ºèœå•</span>
        </div>
        <div class="info-item">
          <span class="info-icon">â±ï¸</span>
          <span class="info-text">æ™ºèƒ½å»¶è¿Ÿï¼šé˜²æ­¢èœå•æ„å¤–æ¶ˆå¤±</span>
        </div>
        <div class="info-item">
          <span class="info-icon">ğŸ”—</span>
          <span class="info-text">æ— ç¼è¿æ¥ï¼šæŒ‰é’®åˆ°èœå•çš„å¹³æ»‘è¿‡æ¸¡</span>
        </div>
      </div>
    </div>
    
    <!-- æ“ä½œæ—¥å¿— -->
    <div class="demo-section">
      <h2>æ“ä½œæ—¥å¿—</h2>
      <div class="action-log">
        <div 
          v-for="(log, index) in actionLogs" 
          :key="index"
          class="log-item"
        >
          <span class="log-time">{{ log.time }}</span>
          <span class="log-action">{{ log.action }}</span>
        </div>
        <div v-if="actionLogs.length === 0" class="log-empty">
          æš‚æ— æ“ä½œè®°å½•
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import FloatingMenu from './common/FloatingMenu.vue'

export default {
  name: 'FloatingMenuDemo',
  components: {
    FloatingMenu
  },
  data() {
    return {
      actionLogs: [],
      basicMenuItems: [
        {
          path: '/demo/basic1',
          text: 'åŸºç¡€åŠŸèƒ½1',
          icon: 'ğŸ”§',
          description: 'åŸºç¡€åŠŸèƒ½æè¿°'
        },
        {
          path: '/demo/basic2',
          text: 'åŸºç¡€åŠŸèƒ½2',
          icon: 'âš¡',
          description: 'å¦ä¸€ä¸ªåŸºç¡€åŠŸèƒ½'
        }
      ],
      userMenuItems: [
        {
          path: '/profile',
          text: 'ä¸ªäººèµ„æ–™',
          icon: 'ğŸ‘¤',
          description: 'æŸ¥çœ‹å’Œç¼–è¾‘ä¸ªäººèµ„æ–™'
        },
        {
          path: '/settings',
          text: 'è´¦æˆ·è®¾ç½®',
          icon: 'âš™ï¸',
          description: 'ç®¡ç†è´¦æˆ·è®¾ç½®'
        },
        {
          path: '/logout',
          text: 'é€€å‡ºç™»å½•',
          icon: 'ğŸšª',
          description: 'å®‰å…¨é€€å‡ºç³»ç»Ÿ'
        }
      ],
      settingsMenuItems: [
        {
          path: '/settings/theme',
          text: 'ä¸»é¢˜è®¾ç½®',
          icon: 'ğŸ¨',
          description: 'è‡ªå®šä¹‰ç•Œé¢ä¸»é¢˜'
        },
        {
          path: '/settings/notification',
          text: 'é€šçŸ¥è®¾ç½®',
          icon: 'ğŸ””',
          description: 'ç®¡ç†é€šçŸ¥åå¥½'
        },
        {
          path: '/settings/privacy',
          text: 'éšç§è®¾ç½®',
          icon: 'ğŸ”’',
          description: 'éšç§å’Œå®‰å…¨é€‰é¡¹'
        }
      ],
      moreMenuItems: [
        {
          path: '/about',
          text: 'å…³äºæˆ‘ä»¬',
          icon: 'â„¹ï¸',
          description: 'äº†è§£æ›´å¤šä¿¡æ¯'
        },
        {
          path: '/contact',
          text: 'è”ç³»æˆ‘ä»¬',
          icon: 'ğŸ“§',
          description: 'è·å–å¸®åŠ©å’Œæ”¯æŒ'
        },
        {
          path: '/blog',
          text: 'åšå®¢',
          icon: 'ğŸ“',
          description: 'é˜…è¯»æœ€æ–°æ–‡ç« '
        }
      ],
      profileMenuItems: [
        {
          path: '/profile',
          text: 'ä¸ªäººèµ„æ–™',
          icon: 'ğŸ‘¤',
          description: 'æŸ¥çœ‹å’Œç¼–è¾‘ä¸ªäººèµ„æ–™'
        },
        {
          path: '/dashboard',
          text: 'æ§åˆ¶å°',
          icon: 'ğŸ“Š',
          description: 'è®¿é—®ç®¡ç†æ§åˆ¶å°'
        },
        {
          path: '/logout',
          text: 'é€€å‡ºç™»å½•',
          icon: 'ğŸšª',
          description: 'å®‰å…¨é€€å‡ºç³»ç»Ÿ'
        }
      ]
    }
  },
  methods: {
    addLog(action) {
      const now = new Date()
      const time = now.toLocaleTimeString()
      this.actionLogs.unshift({ time, action })
      
      // é™åˆ¶æ—¥å¿—æ•°é‡
      if (this.actionLogs.length > 10) {
        this.actionLogs = this.actionLogs.slice(0, 10)
      }
    },
    
    handleBasicMenuClick(item) {
      this.addLog(`ç‚¹å‡»äº†åŸºç¡€èœå•: ${item.text}`)
    },
    
    handleUserMenuClick(item) {
      this.addLog(`ç‚¹å‡»äº†ç”¨æˆ·èœå•: ${item.text}`)
    },
    
    handleSettingsMenuClick(item) {
      this.addLog(`ç‚¹å‡»äº†è®¾ç½®èœå•: ${item.text}`)
    },
    
    handleAdvancedMenuClick(item) {
      this.addLog(`ç‚¹å‡»äº†é«˜çº§èœå•: ${item.text}`)
    },
    
    handleFileMenuClick(item) {
      this.addLog(`ç‚¹å‡»äº†æ–‡ä»¶èœå•: ${item.text}`)
    },
    
    handleMoreMenuClick(item) {
      this.addLog(`ç‚¹å‡»äº†æ›´å¤šèœå•: ${item.text}`)
    },
    
    handleProfileMenuClick(item) {
      this.addLog(`ç‚¹å‡»äº†ä¸ªäººèœå•: ${item.text}`)
    },
    
    handleCustomAction(action) {
      this.addLog(`æ‰§è¡Œäº†è‡ªå®šä¹‰æ“ä½œ: ${action}`)
    },
    
    handleFileAction(action) {
      this.addLog(`æ‰§è¡Œäº†æ–‡ä»¶æ“ä½œ: ${action}`)
    }
  }
}
</script>

<style scoped>
.floating-menu-demo {
  max-width: 1200px;
  margin: 0 auto;
  padding: var(--spacing-lg);
}

.floating-menu-demo h1 {
  text-align: center;
  color: var(--color-text-primary);
  margin-bottom: var(--spacing-xl);
  font-size: var(--font-size-3xl);
}

.demo-section {
  margin-bottom: var(--spacing-xl);
  padding: var(--spacing-lg);
  background: var(--color-bg-secondary);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-border-primary);
}

.demo-section h2 {
  color: var(--color-text-primary);
  margin-bottom: var(--spacing-lg);
  font-size: var(--font-size-xl);
  border-bottom: 2px solid var(--color-primary);
  padding-bottom: var(--spacing-sm);
}

.demo-row {
  display: flex;
  gap: var(--spacing-lg);
  flex-wrap: wrap;
  align-items: flex-start;
}

/* è‡ªå®šä¹‰èœå•é¡¹æ ·å¼ */
.custom-menu-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-md);
  border-radius: var(--radius-md);
  transition: all var(--transition-normal);
  cursor: pointer;
  border: 2px solid transparent;
}

.custom-menu-item:hover {
  background-color: var(--color-bg-hover);
  border-color: var(--color-primary);
  transform: translateX(4px);
}

.custom-icon {
  font-size: var(--font-size-xl);
  width: 32px;
  text-align: center;
}

.custom-content {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.custom-title {
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
}

.custom-desc {
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
}

/* æ–‡ä»¶èœå•é¡¹æ ·å¼ */
.file-menu-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-md);
  border-radius: var(--radius-md);
  transition: all var(--transition-normal);
  cursor: pointer;
  border: 2px solid transparent;
}

.file-menu-item:hover {
  background-color: var(--color-bg-hover);
  border-color: var(--color-primary);
  transform: translateX(4px);
}

.file-icon {
  font-size: var(--font-size-lg);
  width: 24px;
  text-align: center;
}

.file-text {
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
}

/* èœå•åº•éƒ¨æŒ‰é’® */
.menu-footer-actions {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

.footer-btn {
  padding: var(--spacing-sm) var(--spacing-md);
  border: none;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all var(--transition-normal);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
}

.footer-btn.primary {
  background: var(--color-primary);
  color: white;
}

.footer-btn.primary:hover {
  background: var(--color-primary-dark);
  transform: translateY(-1px);
}

.footer-btn.secondary {
  background: var(--color-bg-tertiary);
  color: var(--color-text-primary);
  border: 1px solid var(--color-border-primary);
}

.footer-btn.secondary:hover {
  background: var(--color-bg-hover);
  border-color: var(--color-primary);
}

/* å¯¼èˆªæ æ ·å¼ */
.demo-navbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-md) var(--spacing-lg);
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border-primary);
  border-radius: var(--radius-lg);
  margin-bottom: var(--spacing-lg);
}

.nav-brand {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-bold);
  color: var(--color-primary);
}

.nav-menu {
  display: flex;
  align-items: center;
  gap: var(--spacing-lg);
}

.nav-link {
  color: var(--color-text-secondary);
  text-decoration: none;
  padding: var(--spacing-sm) var(--spacing-md);
  border-radius: var(--radius-md);
  transition: all var(--transition-normal);
}

.nav-link:hover {
  color: var(--color-primary);
  background-color: var(--color-bg-hover);
}

.nav-actions {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
}

.nav-dropdown,
.profile-dropdown {
  margin: 0;
}

/* äº¤äº’è¯´æ˜ */
.interaction-info {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: var(--spacing-md);
}

.info-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-md);
  background: var(--color-bg-primary);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border-primary);
}

.info-icon {
  font-size: var(--font-size-xl);
}

.info-text {
  color: var(--color-text-primary);
  font-weight: var(--font-weight-medium);
}

/* æ“ä½œæ—¥å¿— */
.action-log {
  max-height: 300px;
  overflow-y: auto;
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border-primary);
  border-radius: var(--radius-md);
  padding: var(--spacing-md);
}

.log-item {
  display: flex;
  justify-content: space-between;
  padding: var(--spacing-sm);
  border-bottom: 1px solid var(--color-border-primary);
  font-size: var(--font-size-sm);
}

.log-item:last-child {
  border-bottom: none;
}

.log-time {
  color: var(--color-text-secondary);
  font-family: monospace;
}

.log-action {
  color: var(--color-text-primary);
  font-weight: var(--font-weight-medium);
}

.log-empty {
  text-align: center;
  color: var(--color-text-secondary);
  padding: var(--spacing-lg);
  font-style: italic;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
  .demo-row {
    flex-direction: column;
    gap: var(--spacing-md);
  }
  
  .demo-navbar {
    flex-direction: column;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
  }
  
  .nav-menu {
    flex-direction: column;
    gap: var(--spacing-sm);
  }
  
  .interaction-info {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 480px) {
  .floating-menu-demo {
    padding: var(--spacing-md);
  }
  
  .demo-section {
    padding: var(--spacing-md);
  }
  
  .custom-menu-item,
  .file-menu-item {
    padding: var(--spacing-sm);
  }
}
</style>
